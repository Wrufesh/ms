{% extends "base.html" %}
{% block extra_head %}
	<link rel="stylesheet" href="{{ STATIC_URL }}js/dist/css/selectize.bootstrap2.css" />
	<link rel="stylesheet" href="{{ STATIC_URL }}js/dist/css/selectize.bootstrap3.css" />
	<link rel="stylesheet" href="{{ STATIC_URL }}js/dist/css/selectize.css" />
	<link rel="stylesheet" href="{{ STATIC_URL }}js/dist/css/selectize.default.css" />
	<link rel="stylesheet" href="{{ STATIC_URL }}js/dist/css/selectize.legacy.css" />
	<link rel="stylesheet" href="{{ STATIC_URL }}js/dist/css/jquery.datetimepicker.css" />

<style>
table tr:nth-child(5)
{
	display: none;
}
</style>
{% endblock %}

{% block content %}
<form action="/message/compose/" method="post">
{% csrf_token %}
<table>
{{form.as_table}}

<tr>
	<td></td>
	<td>
		<input id="submit" type="submit" value="Save" data-bind="value: change_button_value">
	</td>
</tr>
</table>
</form>

<form action="/message/compose/" method="post">
{% csrf_token %}
{{form.message.label}}
	{{form.message}}
	</form>

{% endblock %}

{% block extra_script %}
<script type="text/javascript" src="{{ STATIC_URL }}js/dist/js/standalone/selectize.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/dist/js/standalone/selectize.min.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/dist/jquery.datetimepicker.js"></script>

<script>
	$('#id_scheduled_time').datetimepicker();

	$(document).ready(function(){
		$('#id_user_receivers').selectize({
 			plugins: ['remove_button']
			});

		$('#id_group_receivers').selectize({
 			plugins: ['remove_button']
			});

		$('#id_scheduled').click(function() {
        	if($(this).is(':checked'))
    			{
        	    $('table tr:nth-child(5)').fadeIn();
        	    // $('#submit').val('Save');
        		}
        	else
            	{
            	$('table tr:nth-child(5)').css('display','none');
        	    // $('#submit').val('Submit');

    			}
   			});
	});	

	Toggle = function(){
		var self = this;
		self.tog = ko.observable(false);
		self.change_button_value = ko.observable('Submit')
		self.submit_save = function(data,event){
			if(self.tog()==true){
				self.change_button_value('Save');
				console.log(event.target.checked); // log out the current state
       			console.log("1");
       			return true;
			}
			else{
				self.change_button_value('Submit');
				console.log(event.target.checked); // log out the current state
       			console.log("1");
       			return true; 
			}
		};
	};

	toggle = new Toggle();
	ko.applyBindings(toggle)

	toggle = new Toggle();
	ko.applyBindings(toggle);

</script>
{% endblock %}